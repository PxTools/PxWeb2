<?xml version="1.0"?>
<!-- This file is only needed when using IIS as web server for the PxWeb application -->
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="React Routes" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />

                    </conditions>
                    <action type="Rewrite" url="index.html" />
                </rule>
            </rules>
        </rewrite>
        <httpProtocol>
            <!-- Custom headers that will increase security in PxWeb and help to prevent different kinds of hacker attacks -->
            <customHeaders>
                <!-- Prevent click-jacking attacks. You need to remove this header if you want to render PxWeb in an iframe -->
                <add name="X-Frame-Options" value="SAMEORIGIN" />

                <!-- Control how much referrer information should be included in requests. -->
                <!-- same-origin means that referrer information is only sent when scheme (http/https), port and host (domain) is the same. Only on our own site in other words -->
                <add name="Referrer-Policy" value="same-origin" />

                <!-- Permissions-Policy restricts which powerful browser features (e.g. camera, geolocation, fullscreen) this page and any embedded content are allowed to use. -->
                <add name="Permissions-Policy" value="accelerometer=(), autoplay=(), camera=(), encrypted-media=(), fullscreen=(self), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), midi=(), payment=(), picture-in-picture=(), usb=()" />

                <!-- Prevent cross-site scripting (XSS) attacks -->
                <add name="X-XSS-Protection" value="1; mode=block" />

                <!-- The Cache-Control HTTP header field holds directives — in both requests and responses — that control caching in browsers and shared caches -->
                <add name="Cache-Control" value="no-cache, must-revalidate" />
                <add name="Pragma" value="no-cache" />
                <add name="Expires" value="0" />

                <!-- Prevent MIME-sniffing attacks -->
                <add name="X-Content-Type-Options" value="nosniff" />

                <!--informs browsers that the site should only be accessed using HTTPS -->
                <add name="Strict-Transport-Security" value="max-age=31536000; includeSubDomains;" />

                <!-- Content-Security-Policy defines which sources of content (scripts, styles, images, etc.) are allowed to load, helping prevent XSS and injection attacks. -->
                <add name="Content-Security-Policy" value="default-src 'self'; connect-src 'self' https://enter-your-api-domain-here; script-src 'self'" />
            </customHeaders>
        </httpProtocol>
    </system.webServer>
</configuration>
